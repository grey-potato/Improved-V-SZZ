# é›†æˆV-SZZ å¿«é€Ÿå‚è€ƒ

## ğŸ¯ å…­ç§ä½¿ç”¨æ¨¡å¼

### 1ï¸âƒ£ å®Œæ•´åˆ†ææ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
**è‡ªåŠ¨æ‰«æ + è‡ªåŠ¨åˆ†æ**

```bash
python integrated_vszz.py <ä»“åº“è·¯å¾„>

# è‡ªå®šä¹‰å‚æ•°
python integrated_vszz.py <ä»“åº“è·¯å¾„> --max-commits 500 --max-bfcs 10 --min-score 15
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ç¬¬ä¸€æ¬¡åˆ†æä»“åº“
- å¿«é€Ÿäº†è§£ä»“åº“çš„å®‰å…¨é—®é¢˜
- æ¢ç´¢æ€§åˆ†æ

---

### 2ï¸âƒ£ æ‰«ææ¨¡å¼
**åªè¯†åˆ«BFCï¼Œä¸è¿è¡ŒV-SZZ**

```bash
python integrated_vszz.py <ä»“åº“è·¯å¾„> --scan-only

# è¾“å‡ºï¼šintegrated_results/é¡¹ç›®å_candidates_æ—¶é—´æˆ³.json
```

**é€‚ç”¨åœºæ™¯ï¼š**
- å…ˆæ¢ç´¢æœ‰å“ªäº›BFCå€™é€‰
- å›¢é˜Ÿè®¨è®ºé€‰æ‹©å“ªäº›åˆ†æ
- åˆ†æ‰¹æ¬¡åˆ†æå¤§å‹é¡¹ç›®

**åç»­æ“ä½œï¼š**
```bash
# æŸ¥çœ‹å€™é€‰åˆ—è¡¨
cat integrated_results/é¡¹ç›®å_candidates_*.json

# é€‰æ‹©åˆ†æï¼ˆè§æ¨¡å¼5ï¼‰
python integrated_vszz.py <ä»“åº“è·¯å¾„> --analyze-from candidates.json --ids 1,3,5
```

---

### 3ï¸âƒ£ æŒ‡å®šCommitæ¨¡å¼
**ç›´æ¥åˆ†æå·²çŸ¥çš„commit**

```bash
# å•ä¸ªcommit
python integrated_vszz.py <ä»“åº“è·¯å¾„> --commit abc123def456

# å¤šä¸ªcommitsï¼ˆé€—å·åˆ†éš”ï¼‰
python integrated_vszz.py <ä»“åº“è·¯å¾„> --commit abc123,def456,ghi789
```

**é€‚ç”¨åœºæ™¯ï¼š**
- å·²ç»ä»CVEæ•°æ®åº“æ‰¾åˆ°fix commit
- éªŒè¯ç‰¹å®šcommit
- å¤ç°ç ”ç©¶ç»“æœ

---

### 4ï¸âƒ£ CVEæœç´¢æ¨¡å¼
**è‡ªåŠ¨æŸ¥æ‰¾CVEç›¸å…³çš„commits**

```bash
python integrated_vszz.py <ä»“åº“è·¯å¾„> --cve CVE-2023-1234
```

**å·¥ä½œæµç¨‹ï¼š**
1. æ‰«æä»“åº“æäº¤
2. æŸ¥æ‰¾commit messageåŒ…å«"CVE-2023-1234"çš„æäº¤
3. è‡ªåŠ¨å¯¹æ‰€æœ‰ç›¸å…³æäº¤è¿è¡ŒV-SZZ

**é€‚ç”¨åœºæ™¯ï¼š**
- ç ”ç©¶ç‰¹å®šCVE
- æ‰¹é‡åˆ†æCVEä¿®å¤
- éªŒè¯CVEä¿®å¤çš„å®Œæ•´æ€§

---

### 5ï¸âƒ£ æ–‡ä»¶åŠ è½½æ¨¡å¼
**ä»æ‰«æç»“æœä¸­é€‰æ‹©ç‰¹å®šBFCåˆ†æ**

```bash
# åˆ†ææŒ‡å®šIDçš„BFC
python integrated_vszz.py <ä»“åº“è·¯å¾„> --analyze-from candidates.json --ids 1,3,5

# åˆ†æå…¨éƒ¨
python integrated_vszz.py <ä»“åº“è·¯å¾„> --analyze-from candidates.json
```

**å·¥ä½œæµç¨‹ï¼š**
```
ç¬¬ä¸€æ­¥ï¼šæ‰«æ
  python integrated_vszz.py repo --scan-only
  â†’ ç”Ÿæˆ candidates.json

ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹å€™é€‰
  cat candidates.json  # æˆ–ç”¨ç¼–è¾‘å™¨æ‰“å¼€

ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©åˆ†æ
  python integrated_vszz.py repo --analyze-from candidates.json --ids 1,2,5
```

**é€‚ç”¨åœºæ™¯ï¼š**
- å¤§å‹é¡¹ç›®åˆ†æ‰¹åˆ†æ
- å›¢é˜Ÿåä½œï¼ˆå…±äº«candidatesæ–‡ä»¶ï¼‰
- ç²¾ç¡®æ§åˆ¶åˆ†æèŒƒå›´

---

### 6ï¸âƒ£ äº¤äº’æ¨¡å¼
**äº¤äº’å¼é€‰æ‹©è¦åˆ†æçš„BFC**

```bash
python integrated_vszz.py <ä»“åº“è·¯å¾„> --interactive
```

**äº¤äº’æµç¨‹ï¼š**
```
æ‰¾åˆ° 15 ä¸ªBFCå€™é€‰:

[ 1] abc123 (åˆ†æ•°:30) - Fix CVE-2023-1234: SQL injection...
[ 2] def456 (åˆ†æ•°:25) - Fix XSS vulnerability in...
[ 3] ghi789 (åˆ†æ•°:20) - Security fix for authentication...
...

è¯·é€‰æ‹©è¦åˆ†æçš„BFC:
  - è¾“å…¥ç¼–å·ï¼Œç”¨é€—å·åˆ†éš”ï¼ˆå¦‚: 1,3,5ï¼‰
  - è¾“å…¥èŒƒå›´ï¼ˆå¦‚: 1-5ï¼‰
  - è¾“å…¥ 'all' åˆ†æå…¨éƒ¨
  - è¾“å…¥ 'q' é€€å‡º

> 1,3,5

âœ“ é€‰æ‹©äº† 3 ä¸ªBFC
ã€V-SZZåˆ†æã€‘...
```

**é€‚ç”¨åœºæ™¯ï¼š**
- å¿«é€Ÿç­›é€‰
- å®æ—¶å†³ç­–
- æ•™å­¦æ¼”ç¤º

---

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

### æ‰«ææ¨¡å¼è¾“å‡º
```
integrated_results/
â””â”€â”€ é¡¹ç›®å_candidates_20260112_143022.json
```

**ç»“æ„ï¼š**
```json
{
  "repository": "activemq",
  "scan_date": "20260112_143022",
  "candidates_found": 15,
  "candidates": [
    {
      "id": 1,
      "commit_hash": "abc123...",
      "short_hash": "abc123",
      "cve_id": "CVE-2023-1234",
      "vulnerability_type": "SQL Injection",
      "score": 30,
      "message": "Fix CVE-2023-1234...",
      "analyzed": false,
      "bic_count": null
    }
  ]
}
```

### åˆ†ææ¨¡å¼è¾“å‡º
```
integrated_results/
â”œâ”€â”€ é¡¹ç›®å_20260112_143022.json          # è¯¦ç»†JSON
â””â”€â”€ é¡¹ç›®å_20260112_143022_report.txt    # å¯è¯»æŠ¥å‘Š
```

---

## ğŸ”§ å¸¸ç”¨å‚æ•°ç»„åˆ

### å¿«é€Ÿæµ‹è¯•
```bash
# æ‰«æ100ä¸ªæäº¤ï¼Œåˆ†æå‰3ä¸ªBFC
python integrated_vszz.py repo --max-commits 100 --max-bfcs 3
```

### æ·±åº¦æ‰«æ
```bash
# æ‰«æ1000ä¸ªæäº¤ï¼Œåªè¦é«˜åˆ†å€™é€‰
python integrated_vszz.py repo --max-commits 1000 --min-score 20
```

### å®½æ¾è¿‡æ»¤
```bash
# é™ä½é˜ˆå€¼ï¼Œå‘ç°æ›´å¤šå€™é€‰
python integrated_vszz.py repo --min-score 5
```

### åªåˆ†æCVEç›¸å…³
```bash
# åªåˆ†ææŸä¸ªCVE
python integrated_vszz.py repo --cve CVE-2023-1234
```

---

## ğŸ’¡ å…¸å‹å·¥ä½œæµ

### å·¥ä½œæµ1ï¼šæ¢ç´¢æœªçŸ¥ä»“åº“
```bash
# æ­¥éª¤1ï¼šå¿«é€Ÿæ‰«æ
python integrated_vszz.py repo --scan-only --max-commits 200

# æ­¥éª¤2ï¼šæŸ¥çœ‹å€™é€‰
cat integrated_results/*_candidates_*.json

# æ­¥éª¤3ï¼šé€‰æ‹©é«˜åˆ†å€™é€‰åˆ†æ
python integrated_vszz.py repo --analyze-from candidates.json --ids 1,2,3
```

### å·¥ä½œæµ2ï¼šç ”ç©¶ç‰¹å®šCVE
```bash
# ç›´æ¥åˆ†æCVE
python integrated_vszz.py repo --cve CVE-2023-1234
```

### å·¥ä½œæµ3ï¼šéªŒè¯å·²çŸ¥commit
```bash
# ç›´æ¥åˆ†æcommit
python integrated_vszz.py repo --commit abc123def456
```

### å·¥ä½œæµ4ï¼šæ‰¹é‡åˆ†æ
```bash
# æ­¥éª¤1ï¼šæ‰«ææ‰€æœ‰å€™é€‰
python integrated_vszz.py repo --scan-only --max-commits 1000

# æ­¥éª¤2ï¼šåˆ†æ‰¹åˆ†æ
python integrated_vszz.py repo --analyze-from candidates.json --ids 1-10
python integrated_vszz.py repo --analyze-from candidates.json --ids 11-20
python integrated_vszz.py repo --analyze-from candidates.json --ids 21-30
```

---

## âš™ï¸ å‚æ•°è¯¦è§£

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `repo_path` | ä½ç½®å‚æ•° | - | Gitä»“åº“è·¯å¾„ |
| `--scan-only` | æ ‡å¿— | False | åªæ‰«æï¼Œä¸åˆ†æ |
| `--commit` | å­—ç¬¦ä¸² | - | æŒ‡å®šcommitï¼ˆå¯ç”¨é€—å·åˆ†éš”å¤šä¸ªï¼‰|
| `--cve` | å­—ç¬¦ä¸² | - | æŒ‡å®šCVEç¼–å· |
| `--analyze-from` | æ–‡ä»¶è·¯å¾„ | - | ä»JSONåŠ è½½å€™é€‰ |
| `--ids` | å­—ç¬¦ä¸² | - | è¦åˆ†æçš„IDï¼ˆé€—å·åˆ†éš”ï¼‰|
| `--interactive` | æ ‡å¿— | False | äº¤äº’æ¨¡å¼ |
| `--max-commits` | æ•´æ•° | 500 | æœ€å¤šæ‰«ææäº¤æ•° |
| `--max-bfcs` | æ•´æ•° | 10 | æœ€å¤šåˆ†æBFCæ•° |
| `--min-score` | æ•´æ•° | 10 | BFCæœ€ä½åˆ†æ•° |
| `--use-llm` | æ ‡å¿— | False | ä½¿ç”¨LLMéªŒè¯ |
| `--openai-key` | å­—ç¬¦ä¸² | - | OpenAI API Key |

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ†æactivemq
```bash
# å®Œæ•´åˆ†æï¼ˆé»˜è®¤ï¼‰
python integrated_vszz.py ..\repos\activemq

# åªæ‰«æ
python integrated_vszz.py ..\repos\activemq --scan-only

# åˆ†æç‰¹å®šCVE
python integrated_vszz.py ..\repos\activemq --cve CVE-2015-1830
```

### ç¤ºä¾‹2ï¼šåˆ†æç‰¹å®šcommit
```bash
# å¦‚æœä½ å·²çŸ¥æŸä¸ªcommitæ˜¯BFC
python integrated_vszz.py ..\repos\activemq --commit 729c473a8e
```

### ç¤ºä¾‹3ï¼šäº¤äº’å¼åˆ†æ
```bash
python integrated_vszz.py ..\repos\activemq --interactive
```

---

## â“ å¸¸è§é—®é¢˜

**Q: é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ**
- æ–°é¡¹ç›® â†’ ç”¨**æ‰«ææ¨¡å¼**å…ˆçœ‹çœ‹
- å·²çŸ¥commit â†’ ç”¨**æŒ‡å®šcommitæ¨¡å¼**
- ç ”ç©¶CVE â†’ ç”¨**CVEæœç´¢æ¨¡å¼**
- éœ€è¦è®¨è®º â†’ ç”¨**æ‰«ææ¨¡å¼**ç”Ÿæˆå€™é€‰ï¼Œå›¢é˜Ÿè®¨è®ºåç”¨**æ–‡ä»¶åŠ è½½æ¨¡å¼**
- å¿«é€Ÿæ“ä½œ â†’ ç”¨**äº¤äº’æ¨¡å¼**

**Q: --scan-only å’Œå®Œæ•´åˆ†ææœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
- `--scan-only`ï¼šåªè¯†åˆ«BFCï¼Œä¿å­˜åˆ°JSONï¼Œä¸è¿è¡ŒV-SZZ
- å®Œæ•´åˆ†æï¼šè¯†åˆ«BFC + è‡ªåŠ¨è¿è¡ŒV-SZZ

**Q: å¦‚ä½•åˆ†æå¤šä¸ªcommitsï¼Ÿ**
```bash
# æ–¹æ³•1ï¼šé€—å·åˆ†éš”
python integrated_vszz.py repo --commit abc123,def456,ghi789

# æ–¹æ³•2ï¼šå…ˆæ‰«æï¼Œåé€‰æ‹©
python integrated_vszz.py repo --scan-only
python integrated_vszz.py repo --analyze-from candidates.json --ids 1,3,5
```

**Q: å¦‚ä½•é¿å…é‡å¤æ‰«æï¼Ÿ**
```bash
# ç¬¬ä¸€æ¬¡ï¼šæ‰«æå¹¶ä¿å­˜
python integrated_vszz.py repo --scan-only

# ä¹‹åï¼šä»æ–‡ä»¶åŠ è½½
python integrated_vszz.py repo --analyze-from candidates.json --ids ...
```

---

## ğŸ“ å¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
python integrated_vszz.py --help

# æŸ¥çœ‹ç¤ºä¾‹
python integrated_vszz.py --help | grep "ç¤ºä¾‹" -A 20
```
